FROM python:alpine

MAINTAINER Marcel Grossmann <whatever4711@gmail.com>

RUN apk add --update git gcc musl-dev
RUN git clone git://github.com/osrg/ryu.git
RUN cd ryu && \
    pip install -r tools/pip-requires && \
    python setup.py install
# Pending PR
COPY bugfixes/ofctl_rest.py /ryu/ryu/app/ofctl_rest.py
RUN apk add --update libffi-dev openssl-dev libxml2 libxml2-dev libxslt libxslt-dev && \
    cd /ryu/ryu/app && \
    git clone https://github.com/whatever4711/ryu-starter-kit.git sdnhub_apps && \
    pip install networkx bitarray paramiko eventlet xml_compare pyflakes pylint

WORKDIR ryu

ENV PYTHONPATH=.

ENTRYPOINT ["ryu-manager"]
CMD ["--help"]
